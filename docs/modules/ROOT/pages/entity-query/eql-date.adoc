== EQL date and time functions
EntityModule provides an extensive list of `EQL functions` to handle the specification of dates and times.
The creation of all date and times you need for filtering can be facilitated by providing the necessary date and time specifications to these functions.

These functions will use your `Locale.default()` to determine daylight saving time and the day the week start at.
You can set up your Locale by setting the `spring.mvc.locale` property in you application properties.

=== Default EQL date and time functions
The date functions found below can have a number of different arguments:

* a `temporal` can be
** a formatted date string f.e. `offset(2019-03-02, 'at 15:05')`
** another eql date function f.e. `startOfDay(thisMonth())"`
* a `period` consists off xref::entity-query/eql-date.adoc#eql-date-and-time-specifications[date and time specifications]

The following `EQL functions` are provided by default:

[cols="1,2",opts=header]
|===
|Function
|Output
|Example

|now()
|Current date & time
|`now()`

|today()
|Today at midnight
|`today()`

|offset(TEMPORAL, PERIOD)
|Adds a a period to a given temporal
|`offset(now(),'+1h +3m')` = the current time + 1 hour + 3 minutes

|startOfDay(TEMPORAL)
|Midnight of the date of the temporal
|`offset(startOfDay(), +1d)` = today at midnight + 1 day

|thisWeek(FIRST_DAY_OF_WEEK)
|Midnight on the first day of week of the temporal, with the first day of week being an optional third parameter
|`thisWeek()`

|nextWeek(FIRST_DAY_OF_WEEK)
|Midnight on the next day of week of the temporal, with the first day of week being an optional third parameter
|`nextWeek(SUNDAY)` = midnight of the next week starting the week on a sunday

|lastWeek( FIRST_DAY_OF_WEEK)
|Midnight on the last day of week of the temporal, with the first day of week being an optional third parameter
|`lastWeek()`

|startOfWeek(TEMPORAL, FIRST_DAY_OF_WEEK)
|Midnight on first day of week of the temporal, with first day of week being an optional third parameter
|`startOfWeek(nextMonth())` = Get the first day of the month at midnight and then get the first day of the week at midnight for that date

|thisMonth()
|First day of the current month at midnight.
|`thisMonth()`

|nextMonth()
|First day of the next month at midnight.
|`nextMonth()`

|lastMonth()
|First day of the previous month at midnight.
|`lastMonth()`

|startOfMonth(TEMPORAL)
|First day of the current month at midnight.
|`startOfMonth(nextWeek())`= Get the first day of next week at midnight and then get the first day of the month for that date

|thisYear()
|First day of the current year at midnight.
|`thisYear()`

|nextYear()
|First day of the current year at midnight.
|`nextYear()`

|lastYear()
|First day of the current year at midnight.
|`lastYear()`

|startOfYear(TEMPORAL)
|First day of the current year at midnight.
|`startOfYear()`
|===

NOTE: When the `` is not provided, the `Locale.default()` is used to determine if the week starts on sunday or monday.
You can provide an optional dayOfTheWeek paramater ("MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY" ,"SUNDAY") to get that day at midnight.
For example week("SATURDAY") give you the saterday of the current week at midnight.

[#eql-date-and-time-specifications]
=== Date and time specifications
Each function accepts one or more date and time specifications that can alter the date/time used.
The date and time specifications are represented by a sign, followed by an integer and one or more characters starting with a case-sensitive `date and time specification`.
Each group of periods is separated by a space and must be proceeded by a sign (Note that at doesn't require a sign).
The possible `date and time specifications` are:

[cols="1,2,3",opts=header]
|===
|Parameter
|Date and time specification starting character
|Example

|Milliseconds
|S
| The next second: `now("+1 s")`

|Seconds
|s
| The next millisecond: `now("+1 S")`

|Minutes
|m
| Five minutes ago: `now("-5m")`

|Hours
|h or H
| Four hours and 15 minutes ago: `now("-4hours -15minutes")`

|Days
|d or D
| Tomorrow at midnight: `today("+1d")`

|Weeks
|w or W
| First day of the next week at midnight: `week("+ 1 week")`

|Months
|M
| First day of next month at midnight: `month("+1M")`

|Years
|y or Y
| Second day of the previous year `year("-1y +1d")`

|===

NOTE: It is possible to customize the date and time specifications by adding your own mapping.

=== Examples
Some more examples:

[cols="1,2",opts=header]
|===
|Description
|EQL function

|Start of week
|`week()`

|Exactly one week ago (including time)
|`now("-1w")`

|Exactly one week ago (not including time)
|`today("-1w")`

|Two weeks, 3 days and 50 minutes ago
|`now("+2w +3d +50m")`

|Two weeks, 3 days and 50 minutes ago (Full text)
|`now("+2weeks +3days +50minutes")`

|===
